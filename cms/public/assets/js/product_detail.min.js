"use strict";!function(y){function r(){var m,u,n,i,l,r,s,c,d,p,o=y("#google-map-div"),a=o.data("json"),f={},h=[];if(!(o.length<1)){f["#scho"]=!1,f["#trans"]=!1;var g=function(e,o){var t=new google.maps.Marker({map:m,position:e.geometry.location,icon:o});return google.maps.event.addListener(t,"click",function(){n.setContent('<div class="info-window-pdetail">\n                            <h5 class="bm-3">'.concat(e.name,"</h5>\n                            <div>").concat(e.vicinity,"</div>\n                            <div>Distance: ").concat(e.distance,"m</div>\n                        </div>")),n.open(m,t)}),t},t=function(s){var e={rankby:"distance",location:u,radius:2e3,type:"#scho"==s?["school"]:["subway_station"]},o=new google.maps.places.PlacesService(m),c=a["#scho"==s?"schools":"stations"].icon_url,d=y("".concat(s,"-contain"));if(f[s])for(var t=0;t<f[s].length;t++)h.push(g(f[s][t],c));else d.html('<h4 class="pt-3 pb-2 text-center">LOADING...</h4>'),o.nearbySearch(e,function(e,o){if(o==google.maps.places.PlacesServiceStatus.OK){d.html("");for(var t=0;t<e.length;t++){var n=e[t],a=google.maps.geometry.spherical.computeDistanceBetween(n.geometry.location,u);n.distance=Math.round(a)}e.sort(function(e,o){return e.distance-o.distance});for(var i=0;i<e.length;i++){var l=e[i];h.push(g(l,c));var r='<div class="group-direction">\n                                        <div class="info">\n                                            <a class="btn-nlp small red" href="#">'.concat(i+1,"</a>\n                                            <p>").concat(l.name,'</p>\n                                        </div>\n                                        <div class="tip">').concat(l.distance," m</div>\n                                    </div>");d.append(r)}m.setZoom(15),f[s]=e,d.find(".group-direction").on("click",function(e){e.preventDefault(),google.maps.event.trigger(h[y(this).index()],"click")})}else"ZERO_RESULTS"==o?y("".concat(s,"-contain")).html('<h4 class="pt-3 pb-2 text-center text-info">NOT FOUND!</h4>'):y("".concat(s,"-contain")).html('<h4 class="pt-3 pb-2 text-center text-danger">SOMETHING WENT WRONG!</h4>')})},v=function(){var e=s.data("json")?{geometry:s.data("json").location}:d.getPlace(),o=p.getPlace();if(e&&o&&e.geometry&&o.geometry){var t=s[0].value,n=c[0].value,a=y("".concat(i,"-contain"));a.html('<h4 class="pt-3 pb-2 text-center">LOADING...</h4>'),r.route({origin:t,destination:n,travelMode:"DRIVING"},function(e,o){"OK"===o?(l.setDirections(e),a.html(""),e.routes.map(function(e,o){var t=e.legs[0],n='<div class="group-direction">\n                                        <div class="info">\n                                            <a class="btn-nlp small red" href="#">'.concat(o+1,"</a>\n                                            <p><b>").concat(t.end_address,"</b><br/>").concat(t.duration.text,'</p>\n                                        </div>\n                                        <div class="tip">').concat(t.distance.text,"</div>\n                                    </div>");a.append(n)})):"ZERO_RESULTS"==o?a.html('<h4 class="pt-3 pb-2 text-center text-danger">NOT FOUND!</h4>'):a.html('<h4 class="pt-3 pb-2 text-center text-danger">SOMETHING WENT WRONG!</h4>')})}},w=function(n){var a=n.addEventListener?n.addEventListener:n.attachEvent;function e(e,o){if("keydown"==e){var t=o;o=function(e){if(13==e.which){var o=y.Event("keydown",{keyCode:40,which:40});t.apply(n,[o])}t.apply(n,[e])}}a.apply(n,[e,o])}n.addEventListener=e,n.attachEvent=e;var o=new google.maps.places.Autocomplete(n,{componentRestrictions:{country:"sg"}});return o.addListener("place_changed",v),o},b={toggleMarker:function(){if(m.isShowToggleMarker){for(var e=0;e<h.length;e++)h[e].setMap(m);m.isShowToggleMarker=!1}else{for(var o=0;o<h.length;o++)h[o].setMap(null);m.isShowToggleMarker=!0}}};y("#google-map").attr("src",y("#google-map").attr("data-src")),y("#google-map").on("load",function(){var e={zoom:y(window).width()<768?10:12,center:u=new google.maps.LatLng(a.location),mapTypeId:google.maps.MapTypeId.ROADMAP,draggable:!0,zoomControl:!0,scrollwheel:!1,disableDoubleClickZoom:!1};m=new google.maps.Map(o[0],e),n=new google.maps.InfoWindow,a&&a.area&&new google.maps.Polygon({paths:a.area,strokeColor:"#8E8179",strokeOpacity:.8,strokeWeight:3,fillColor:"#D0C7C1",fillOpacity:.6}).setMap(m),y('.map-info a[data-toggle="tab"]').on("click",function(){i=y(this).attr("href"),function(){for(var e=0;e<h.length;e++)h[e].setMap(null);h=[]}(),"#trans"!==i&&"#scho"!==i||t(i)}),t("#trans"),r=new google.maps.DirectionsService,(l=new google.maps.DirectionsRenderer).setMap(m),s=y("#positionA"),c=y("#positionB"),d=w(s[0]),p=w(c[0]),window.google_map=b,y(".filter-form form").on("submit",function(e){e.preventDefault()}),y(".filter-form form button[type=submit]").on("click",function(e){e.preventDefault(),v()})})}}function s(){function e(e){var o=!1;y(e).on("shown.bs.modal",function(){o||(y("".concat(e," .dayline-carousel .slick-carousel")).slick({infinite:!1,slidesToShow:3,slidesToScroll:3,autoplay:!1,arrows:!0}),o=!0)}),y("".concat(e,' a[data-toggle="tab"]')).on("shown.bs.tab",function(){y("".concat(e," .dayline-carousel .slick-carousel")).slick("setPosition",0),y("".concat(e," .dayline-carousel .slick-carousel")).slick("slickGoTo",0)}),"#modalProject-detail"===e&&y("".concat(e)).on("shown.bs.modal",function(){y("".concat(e," .dayline-carousel .slick-carousel")).slick("setPosition",0),y("".concat(e," .dayline-carousel .slick-carousel")).slick("slickGoTo",0)})}e("#modalProject-detail"),e("#modalProject-detail-contact")}function c(){if(!(y(".pdetail-control").length<1)){y("a[data-fancybox-trigger]").each(function(e,o){return t=y(o).data("fancybox-trigger"),void y('[data-fancybox="'.concat(t,'"]')).fancybox({afterLoad:function(e,o){var t=window.devicePixelRatio||1;1.5<t&&(o.width=o.width/t,o.height=o.height/t)},thumbs:{autoStart:768<y(window).width(),hideOnClose:!1,axis:"y"}});var t})}}y(function(){function e(){768<=y(window).outerWidth()&&y(".pdetail-s-floorplan a.img-bg").each(function(){y(this).zoom({url:y(this).find("img").attr("src"),magnify:1.8})})}var t,n,a,o,i;function l(){y(window).outerWidth()<992?(o.addClass("closed"),i.addClass("d-none")):(o.removeClass("closed"),i.removeClass("d-none"))}setTimeout(function(){y("body").addClass("pre-loaded")},300),y.bodyScrollTop=0,y.bodyDisableScroll=function(){var e=y(window);768<e.width()||(y.bodyScrollTop=e.scrollTop(),y("#page").css({height:e.height(),overflow:"hidden"}))},y.bodyReturnScroll=function(){var e=y(window);768<e.width()||(y("#page").css({height:"",overflow:""}),e.scrollTop(y.bodyScrollTop))},y(".modal").on("shown.bs.modal",y.bodyDisableScroll),y(".modal").on("hide.bs.modal",y.bodyReturnScroll),s(),r(),function(){var e=y("#fullpagev2");if(!(e.length<1)){window.oldHeight=window.innerHeight,window.oldWidth=window.innerWidth;y(window).on("resize",function(){y(window).outerWidth()<768||((120<Math.abs(window.innerHeight-window.oldHeight)||992<window.oldWidth)&&window.location.reload(),0<Math.abs(window.innerWidth-window.oldWidth)&&window.location.reload())}),e.fullpage({sectionSelector:".section-full, .footer-page",verticalCentered:!1,fitToSection:!1,css3:!0,responsiveHeight:689,responsiveWidth:800,scrollingSpeed:800,recordHistory:!1,animateAnchor:!1,lockAnchors:!1,menu:"#menuFullpage",afterLoad:function(){y(".section-full.active .lazy, .footer-page.active .lazy").Lazy({effect:"fadeIn",effectTime:500})},afterRender:function(){setTimeout(function(){window.isResponsive&&y(".fp-section").removeAttr("style").addClass("no-full")},700)},afterResponsive:function(e){(window.isResponsive=e)?y(".fp-section").removeAttr("style").addClass("no-full"):y(".fp-section").removeClass("no-full")}});var t="",n=!1,a=!1;1200<y(window).width()&&y(".pdetail-s-floorplan .sidebar-filter").on("mouseenter",function(){y.fn.fullpage.setAllowScrolling(!1),t=".sidebar-filter .simplebar-content-wrapper",n=!0}).on("mouseleave",function(){y.fn.fullpage.setAllowScrolling(!0),n=!1}),y(".map-info").on("mouseenter",function(){y.fn.fullpage.setAllowScrolling(!1),t=".map-info .tab-pane.active .simplebar-content-wrapper",a=!0}).on("mouseleave",function(){y.fn.fullpage.setAllowScrolling(!0),a=!1});var i=!1;y(document).on("mousewheel",function(o){t&&(n||a)&&(clearTimeout(i),i=setTimeout(function(){var e=y(t);e.stop().animate({scrollTop:e.scrollTop()-4*o.deltaY})},10))})}}(),y(".pdetail-s-gallery .owl-carousel").owlCarousel({items:1,smartSpeed:500,dots:!1,nav:!0,margin:20,navText:[],freeDrag:!1}),y(".grid-gallery").masonry({columnWidth:".grid-sizer",percentPosition:!0,horizontalOrder:!1,gutter:20}),y(".pdetail-s-pricing .owl-carousel .inner-item").wrap('<div class="gallery-item"></div>'),y(".pdetail-s-pricing .owl-carousel").owlCarousel({items:3,smartSpeed:800,dots:!1,nav:!1,navText:[],loop:!1,responsive:{0:{items:2},480:{items:2},992:{items:2},1440:{items:3},2200:{items:4}}}),y(window).width()<768&&new Swiper(".pdetail-s-feature .swiper-container",{slidesPerView:"auto",spaceBetween:1}),y(".form-product-v2-js .form-validate").validate(),y(".pdetail-control").length<1||(y(window).on("scroll",function(){200<y(window).scrollTop()?y(".pdetail-control").addClass("expand"):y(".pdetail-control").removeClass("expand")}),y("#gotoTop").on("click",function(e){e.preventDefault(),y("body,html").animate({scrollTop:0},500)}),y(".pdetail-s-location .open-map-info").on("click",function(e){e.preventDefault(),y(e.currentTarget).toggleClass("closed"),y(".pdetail-s-location .map-info").toggleClass("d-none"),window.google_map&&window.google_map.toggleMarker()}),y(".pdetail-navside-toogle, .mobile-close-nav").click(function(e){e.preventDefault(),y(".pdetail-sidebar").toggleClass("expand")}),y(".navsidebar a").on("click",function(){y(".pdetail-sidebar").removeClass("expand")}),y(".scroll-ui").each(function(e,o){new SimpleBar(o,{forceVisible:!0,autoHide:!1})})),y(window).on("resize",e),e(),y(".pdetail-s-floorplan #select-floor-plan").change(function(e){e.preventDefault(),y(".pdetail-s-floorplan .tab-pane.active").removeClass("active show"),0<y("#tab"+y(this).val()).length&&y("#tab"+y(this).val()).tab("show")}),y(".pdetail-s-floorplan .sidebar-filter a").on("click",function(e){e.preventDefault(),y(e.currentTarget).next().hasClass("collapse")||(y(".pdetail-s-floorplan .tab-pane.active").removeClass("active show"),0<y(y(e.currentTarget).attr("href")).length&&y(y(e.currentTarget).attr("href")).tab("show"))}),y("#select-floor-plan").select2({width:"75%",minimumResultsForSearch:-1}),c(),y.fn.select2.defaults.set("width","100%"),y(".select-ui").each(function(){var e=y(this);e.select2({placeholder:e.data("placeholder")?e.data("placeholder"):"",minimumResultsForSearch:-1})}),y(".timepicker").datetimepicker({format:"LT",ignoreReadonly:!0,stepping:10}),t=y('.day-stream label.date-item input[type="radio"]'),y(".date-item").on("click",function(e){var o=y(e.currentTarget);y(".date-item").removeClass("choose"),o.find(t).is(":checked")&&o.addClass("choose"),0<t.filter(":checked").length&&(y(".scheduleForm .day-stream").removeClass("error-date"),y(".scheduleForm .day-stream .msg-error").remove())}),n="This field is required!",a=y('.day-stream label.date-item input[type="radio"]'),y.validator.addMethod("nl_mail",function(e,o){return this.optional(o)||/^[a-zA-Z0-9._-]+@[a-zA-Z0-9-]+\.[a-zA-Z.]{2,5}$/i.test(e)},"Please enter a valid email address."),y(".form-validate").each(function(){var o=y(this);if(o.validate({rules:{name:{required:!0},name2:{required:!0},m_name:{required:!0},m_name2:{required:!0},m_name3:{required:!0},phone:{required:!0,minlength:8,number:!0},m_phone:{required:!0,minlength:8,number:!0},m_phone2:{required:!0,minlength:8,number:!0},m_phone3:{required:!0,minlength:8,number:!0},email:{required:!0,nl_mail:!0},m_email:{required:!0,nl_mail:!0},m_email2:{required:!0,nl_mail:!0},m_email3:{required:!0,nl_mail:!0},m_email4:{required:!0,nl_mail:!0}},messages:{name:{required:n},m_name:{required:n},name2:{required:n},m_name2:{required:n},m_name3:{required:n},phone:{required:n},m_phone:{required:n},m_phone2:{required:n},m_phone3:{required:n},email:{required:n},m_email:{required:n},m_email2:{required:n},m_email3:{required:n},m_email4:{required:n}},errorElement:"div",errorPlacement:function(e,o){e.addClass("invalid-feedback"),e.insertAfter(o)},highlight:function(e){y(e).addClass("is-invalid")},unhighlight:function(e){y(e).removeClass("is-invalid")}}),o.hasClass("scheduleForm")){var t='<span class="msg-error">'.concat("This field is required!"," </span>");o.on("submit",function(e){a.filter(":checked").length<1?(e.preventDefault(),o.find(".day-stream").addClass("error-date"),o.find(".day-stream .msg-error").length<1&&o.find(".day-stream").append(t)):(o.find(".day-stream").removeClass("error-date"),o.find(".day-stream .msg-error").remove())})}}),y(".form-validate-contact").validate({rules:{name:{required:!0},phone:{required:!0,number:!0,minlength:8},email:{required:!0,nl_mail:!0}},message:{name:{required:n},phone:{required:n},email:{required:n}},errorElement:"div",errorPlacement:function(e,o){e.addClass("invalid-feedback"),e.insertAfter(o)},highlight:function(e){y(e).addClass("is-invalid")},unhighlight:function(e){y(e).removeClass("is-invalid")}}),o=y(".pdetail-s-location .map-site .open-map-info"),i=y(".pdetail-s-location .map-site .map-info"),y(window).on("resize",l()),l()})}(jQuery);